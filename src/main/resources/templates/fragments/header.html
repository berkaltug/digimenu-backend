<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
		xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3"
		xmlns="http://www.w3.org/1999/xhtml">
<head>
</head>
<body>
	 <div id="bg1"></div>
    <div id="bg2"></div>
    <div id="bg3"></div>

    <!-- navbar -->
    <nav class="navbar navbar-expand-lg ">
      <a class="navbar-brand" >Digimenu</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item">
            <a class="nav-link" href="showmenu" th:href="@{/restaurant/menu}" ><i class="fas fa-book-open mr-2"></i>Menü</a>
          </li>
          <li class="nav-item" >
            <a class="nav-link" href="showtable" th:href="@{/restaurant/tables}" ><i class="fas fa-chair mr-2"></i>Masalar</a>
          </li>
        </ul>
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a th:href="@{/restaurant/logout}" class="nav-link"><i class="fas fa-key mr-2"></i>Logout</a>
          </li>
        </ul>
      </div>
    </nav>

	<script type="text/javascript">

	var audio=new Audio("../sounds/door_bell.mp3")
		//websocket connection
		$(document).ready(function() {

			
			

			var socket = new SockJS('/stomp');
			var stompClient = Stomp.over(socket);
			stompClient.connect({}, function(frame) {
				stompClient.subscribe("/user/restaurant/message", function(data) {
					html =  '<div class="modal" tabindex="-1" role="dialog" id="dynamicModal">';
					html += '<div class="modal-dialog" role="document">';
					html += '<div class="modal-content">';
					html += '<div class="modal-header">';
					html += '<h5 class="modal-title">Yeni Sipariş</h5>';
					html += '<button type="button" class="close" data-dismiss="modal" aria-label="Close">'
					html += '<span aria-hidden="true">&times;</span>';
					html += '</button>';
					html += '</div>';
					html += '<div class="modal-body">';
					html += '<p>' + data.body + '</p>';
					html += '</div>';
					html += '<div class="modal-footer">';
					html += '<button type="button" class="btn btn-primary">Save changes</button>';
					html += '<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>';
					html += '</div>';
					html += '</div>';
					html += '</div>';
					html += '</div>';
					$('body').append(html);
					$("#dynamicModal").modal();
					$("#dynamicModal").modal('show');
					audio.play();
				});
			});
		});
	</script>


</body>
</html>
